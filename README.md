# Insurance RAG Engine ğŸ¥

> ä¿é™©äº§å“ä¿¡æ¯ç»“æ„åŒ–æå–ç³»ç»Ÿ â€”â€” å°†æ¡æ¬¾æŸ¥é˜…æ—¶é—´ä» 10-30 åˆ†é’Ÿç¼©çŸ­åˆ° 10-30 ç§’

[![Next.js](https://img.shields.io/badge/Next.js-16-black)](https://nextjs.org/)
[![Supabase](https://img.shields.io/badge/Supabase-pgvector-green)](https://supabase.com/)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o-blue)](https://openai.com/)

---

## ğŸ¯ 30 ç§’äº†è§£é¡¹ç›®

**ä¸æ˜¯é—®ç­”ç³»ç»Ÿ**ï¼Œæ˜¯**ä¿¡æ¯æå–ç³»ç»Ÿ**ã€‚

| ä¼ ç»Ÿæ–¹å¼ | æœ¬ç³»ç»Ÿ |
|----------|--------|
| é”€å”®å‘˜ç¿»é˜… PDF æ¡æ¬¾ | ä¸‹æ‹‰é€‰æ‹©äº§å“ |
| 10-30 åˆ†é’Ÿ | 10-30 ç§’ |
| ä¿¡æ¯é›¶æ•£ä¸å®Œæ•´ | ç»“æ„åŒ–å¡ç‰‡ + é”€å”®è¯æœ¯ |
| æ— æ³•éªŒè¯æ¥æº | æ¯å­—æ®µæ ‡æ³¨æ¡æ¬¾ IDï¼Œå¯ç‚¹å‡»åŸæ–‡ |

**æ ¸å¿ƒè®¾è®¡å†³ç­–**ï¼šç”¨ UI ä¸‹æ‹‰æ¡†çº¦æŸè¾“å…¥ï¼Œæ¶ˆé™¤æ‹’ç­”åœºæ™¯ï¼Œèšç„¦ä¿¡æ¯è´¨é‡ã€‚

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
ç”¨æˆ·é€‰æ‹©äº§å“ â†’ ç¼“å­˜æ£€æŸ¥ â†’ æ··åˆæ£€ç´¢ â†’ LLM ç»“æ„åŒ–æŠ½å– â†’ è¿”å›å¡ç‰‡
                  â†“              â†“
              å‘½ä¸­ç§’è¿”å›    ç²¾ç¡®åŒ¹é… + è¯­ä¹‰æ£€ç´¢
```

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å…¨æ ˆæ¡†æ¶ | Next.js 16 (App Router) |
| æ•°æ®åº“ | Supabase (PostgreSQL + pgvector) |
| AI | OpenAI text-embedding-3-small + gpt-4o-mini |
| æ ·å¼ | Tailwind CSS + æ˜Ÿåº§ç²’å­èƒŒæ™¯ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…
git clone https://github.com/qd-maker/insurance-rag.git && cd insurance-rag && npm install

# 2. é…ç½® .env.local
OPENAI_API_KEY=sk-xxx
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=xxx
ADMIN_TOKEN=your_admin_token

# 3. å¯¼å…¥æ•°æ® + å¯åŠ¨
npx tsx scripts/seed.ts
npm run dev
```

è®¿é—® http://localhost:3000

---

## ğŸ“Š è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | è¯´æ˜ |
|------|------|------|
| å¼•ç”¨è¦†ç›–ç‡ | â‰¥90% | æ¯å­—æ®µæ ‡æ³¨æ¥æºï¼Œé˜²å¹»è§‰ |
| P95 å»¶è¿Ÿ | â‰¤3000ms | æ€§èƒ½å¯é¢„æµ‹ |
| é”™è¯¯ç‡ | â‰¤5% | ç³»ç»Ÿç¨³å®š |
| ç¼“å­˜å‘½ä¸­ | 24h TTL | äº§å“æ›´æ–°è‡ªåŠ¨å¤±æ•ˆ |

```bash
# è¿è¡Œè¯„ä¼°
npm run eval
npm run baseline
```

---

## ğŸ”Œ æ ¸å¿ƒ API

### POST /api/search
```json
{ "query": "å®‰å¿ƒæ— å¿§åŒ»ç–—é™©" }
```
â†’ è¿”å›ç»“æ„åŒ– JSONï¼ˆäº§å“æ¦‚è¿°ã€æ ¸å¿ƒä¿éšœã€é™¤å¤–è´£ä»»ã€é”€å”®è¯æœ¯ï¼‰+ æ¯å­—æ®µ sourceClauseId

### GET /api/products/list
â†’ è¿”å›å¯ç”¨äº§å“åˆ—è¡¨ï¼ˆä¾›å‰ç«¯ä¸‹æ‹‰æ¡†ï¼‰

### POST /api/admin/cache (éœ€ Token)
â†’ ç¼“å­˜ç®¡ç†ï¼šæŸ¥çœ‹ç»Ÿè®¡ã€æŒ‰äº§å“æ¸…é™¤

### GET /api/health
â†’ ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼ˆDBã€OpenAIã€ç¼“å­˜çŠ¶æ€ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app/api/         # API è·¯ç”±
â”‚   â”œâ”€â”€ search/      # æ ¸å¿ƒæ£€ç´¢
â”‚   â”œâ”€â”€ products/    # äº§å“ç®¡ç†
â”‚   â”œâ”€â”€ admin/       # ç®¡ç†åå°
â”‚   â””â”€â”€ health/      # å¥åº·æ£€æŸ¥
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ retrieval.ts # æ··åˆæ£€ç´¢æ¨¡å—
â”‚   â”œâ”€â”€ logger.ts    # ç»“æ„åŒ–æ—¥å¿—
â”‚   â””â”€â”€ schemas.ts   # Zod Schema
scripts/
â”œâ”€â”€ eval-quality.ts  # è´¨é‡è¯„ä¼°
â”œâ”€â”€ analyze-logs.ts  # æ—¥å¿—åˆ†æ
â””â”€â”€ seed.ts          # æ•°æ®å¯¼å…¥
docs/
â”œâ”€â”€ CACHE_STRATEGY.md
â”œâ”€â”€ INTERVIEW_GUIDE.md
â””â”€â”€ TESTING.md
```

---

## âœ¨ é¡¹ç›®äº®ç‚¹

| äº®ç‚¹ | ä½“ç° |
|------|------|
| **å¯è¿½æº¯** | æ¯å­—æ®µ sourceClauseIdï¼Œç‚¹å‡»çœ‹åŸæ–‡ |
| **æ··åˆæ£€ç´¢** | ç²¾ç¡®åŒ¹é… + è¯­ä¹‰æ£€ç´¢ï¼Œé˜²è·¨äº§å“æ±¡æŸ“ |
| **UI çº¦æŸ** | ä¸‹æ‹‰é€‰æ‹©æ¶ˆé™¤æ‹’ç­”åœºæ™¯ |
| **ç”Ÿäº§çº§** | ç¼“å­˜ã€Rate Limitã€ç»“æ„åŒ–æ—¥å¿—ã€CI è¯„ä¼° |
| **å¤åˆ©æ²‰æ·€** | experience/ è®°å½•é”™è¯¯æ¨¡å¼ä¸è®¾è®¡å†³ç­– |

---

## ğŸ“„ License

MIT
