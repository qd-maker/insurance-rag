# ğŸ›¡ï¸ Insurance-RAGï½œä¿é™©ä¸šåŠ¡å‘˜ AI è¾…åŠ©ç³»ç»Ÿ

> **ä¸€å¥è¯å®šä½**ï¼š
> ğŸ‘‰ ä¸€ä¸ª **é¢å‘ä¿é™©ä¸šåŠ¡å‘˜çš„ AI æ•ˆç‡å·¥å…·**ï¼Œé€šè¿‡ RAG æŠ€æœ¯ï¼ŒæŠŠå¤æ‚å†—é•¿çš„ä¿é™©æ¡æ¬¾ï¼Œè½¬åŒ–ä¸º **å¯ç›´æ¥ä½¿ç”¨çš„ç»“æ„åŒ–ä¿¡æ¯ + é”€å”®è¯æœ¯**ã€‚

---

## ğŸ¯ ä¸€ã€é¡¹ç›®èƒŒæ™¯ï¼ˆWhyï¼‰

### ğŸ‘¤ ç›®æ ‡ç”¨æˆ·

* ä¿é™©ä¸šåŠ¡å‘˜ / é”€å”®äººå‘˜
* éœ€è¦é¢‘ç¹å‘å®¢æˆ·è§£é‡Šä¿é™©æ¡æ¬¾ã€ä¿éšœèŒƒå›´å’Œå…è´£å†…å®¹

### ğŸ˜– æ ¸å¿ƒç—›ç‚¹

* ğŸ“„ æ¡æ¬¾å†…å®¹å†—é•¿ã€ä¸“ä¸šæœ¯è¯­å¤šï¼Œäººå·¥æŸ¥é˜…æ•ˆç‡ä½
* ğŸ§  æ–°ä¸šåŠ¡å‘˜éš¾ä»¥å¿«é€Ÿç†è§£äº§å“ã€å½¢æˆç¨³å®šè¯æœ¯
* ğŸ” ä¸åŒä¸šåŠ¡å‘˜è®²è§£ä¸ä¸€è‡´ï¼Œå½±å“å®¢æˆ·ä¿¡ä»»ä¸è½¬åŒ–

### ğŸ¯ äº§å“ç›®æ ‡

> **è®©ä¸šåŠ¡å‘˜â€œä¸ç”¨å®Œæ•´è¯»æ¡æ¬¾ï¼Œä¹Ÿèƒ½æŠŠä¿é™©è®²æ¸…æ¥šâ€**

---

## ğŸ§© äºŒã€æ ¸å¿ƒåŠŸèƒ½ï¼ˆWhatï¼‰

> âš ï¸ **æ ¸å¿ƒä½¿ç”¨å‰æ**ï¼š
> æœ¬ç³»ç»Ÿçš„æœ€ä½³ä½¿ç”¨æ–¹å¼æ˜¯ **ä¸šåŠ¡å‘˜è¾“å…¥ã€Œé™©ç§ / äº§å“åç§°ã€**ï¼Œè€Œä¸æ˜¯ä»»æ„è‡ªç„¶è¯­è¨€é—®é¢˜ã€‚

| åŠŸèƒ½æ¨¡å—         | è¯´æ˜                                |
| ------------ | --------------------------------- |
| ğŸ” äº§å“æ£€ç´¢      | ä¸šåŠ¡å‘˜è¾“å…¥ä¿é™©äº§å“ / é™©ç§åç§°ï¼Œå®šä½å¯¹åº”æ¡æ¬¾å†…å®¹         |
| ğŸ§± ç»“æ„åŒ–ä¿¡æ¯æŠ½å–   | è‡ªåŠ¨ç”Ÿæˆï¼šäº§å“æ¦‚è§ˆã€æ ¸å¿ƒä¿éšœã€å…è´£æ¡æ¬¾ã€é€‚åˆäººç¾¤          |
| ğŸ—£ï¸ é”€å”®è¯æœ¯ç”Ÿæˆ   | åŸºäºæ¡æ¬¾å†…å®¹ï¼Œç”Ÿæˆ 2â€“5 æ¡å¯ç›´æ¥å¯¹å®¢æˆ·ä½¿ç”¨çš„è§£é‡Š / åŠæœè¯æœ¯ |
| ğŸ“Œ ä¿¡æ¯æ¥æºæ ‡æ³¨    | æ¯æ¡ç»“è®ºæ ‡æ³¨å¯¹åº”æ¡æ¬¾æ¥æºï¼Œå¢å¼ºä¸šåŠ¡å‘˜ä¿¡ä»»æ„Ÿ             |
| ğŸ“¤ ä¸€é”®å¤åˆ¶ / å¯¼å‡º | æ”¯æŒå¤åˆ¶è¯æœ¯ã€å¯¼å‡º PDFï¼Œç”¨äºçœŸå®é”€å”®åœºæ™¯            |

---|---|
| ğŸ” è¯­ä¹‰æ£€ç´¢ | åŸºäº Supabase å‘é‡æ•°æ®åº“ + OpenAI Embeddingï¼Œç²¾å‡†å®šä½ç›¸å…³æ¡æ¬¾ |
| ğŸ§± ç»“æ„åŒ–ä¿¡æ¯æŠ½å– | è‡ªåŠ¨æå–ï¼šäº§å“æ¦‚è§ˆã€æ ¸å¿ƒä¿éšœã€å…è´£æ¡æ¬¾ã€é€‚åˆäººç¾¤ |
| ğŸ—£ï¸ é”€å”®è¯æœ¯ç”Ÿæˆ | è‡ªåŠ¨ç”Ÿæˆ 2â€“5 æ¡å¯ç›´æ¥ä½¿ç”¨çš„è§£é‡Š / åŠæœè¯æœ¯ |
| ğŸ“Œ ä¿¡æ¯æ¥æºæ ‡æ³¨ | æ¯æ¡ç»“è®ºæ ‡æ³¨å¯¹åº”æ¡æ¬¾æ¥æºï¼Œå¢å¼ºä¸šåŠ¡å‘˜ä¿¡ä»»æ„Ÿ |
| ğŸ“¤ ä¸€é”®å¤åˆ¶ / å¯¼å‡º | æ”¯æŒå¤åˆ¶è¯æœ¯ã€å¯¼å‡º PDFï¼Œç”¨äºçœŸå®é”€å”®åœºæ™¯ |

---

## ğŸ”„ ä¸‰ã€å…¸å‹ä½¿ç”¨æµç¨‹ï¼ˆHowï¼‰

1ï¸âƒ£ ä¸šåŠ¡å‘˜è¾“å…¥ **ä¿é™©äº§å“ / é™©ç§åç§°**ï¼ˆå¦‚ï¼šXX é‡ç–¾é™©ï¼‰
2ï¸âƒ£ ç³»ç»Ÿå®šä½è¯¥äº§å“å¯¹åº”çš„æ¡æ¬¾æ–‡æœ¬
3ï¸âƒ£ AI å¯¹æ¡æ¬¾å†…å®¹è¿›è¡Œç»“æ„åŒ–æ•´ç†
4ï¸âƒ£ è‡ªåŠ¨ç”Ÿæˆï¼šäº§å“è¦ç‚¹è¯´æ˜ + é”€å”®è¯æœ¯
5ï¸âƒ£ åŒæ—¶æ ‡æ³¨ä¿¡æ¯æ¥æºï¼ˆæ¡æ¬¾ä½ç½®ï¼‰ï¼Œä¾¿äºä¸šåŠ¡å‘˜æ ¸éªŒ

> ğŸ“Œ è¯´æ˜ï¼š
> æœ¬é¡¹ç›®å¹¶ä¸æ”¯æŒä»»æ„è‡ªç„¶è¯­è¨€é—®ç­”ï¼Œè€Œæ˜¯åˆ»æ„çº¦æŸè¾“å…¥æ–¹å¼ï¼Œä»¥æå‡ç¨³å®šæ€§å’Œå‡†ç¡®æ€§ã€‚

---

## ğŸš§ å››ã€èƒ½åŠ›è¾¹ç•Œï¼ˆéå¸¸é‡è¦ï¼‰

### âœ… å½“å‰å¯ä»¥åšåˆ°

* å°†ä¿é™©æ¡æ¬¾è½¬åŒ–ä¸º **ç»“æ„åŒ–çŸ¥è¯† + å¯ç”¨è¯æœ¯**
* æ˜æ˜¾å‡å°‘ä¸šåŠ¡å‘˜ç¿»é˜…æ–‡æ¡£çš„æ—¶é—´æˆæœ¬
* ä½œä¸º **ä¸šåŠ¡è¾…åŠ©å·¥å…·** æå‡é”€å”®æ•ˆç‡

### âŒ å½“å‰åˆ»æ„ä¸åš

* ä¸æ”¯æŒæ™®é€šç”¨æˆ·ç›´æ¥æé—®ï¼ˆå¦‚â€œæˆ‘é€‚åˆä¹°ä»€ä¹ˆä¿é™©â€ï¼‰
* ä¸åšå¤šä¿é™©äº§å“è‡ªåŠ¨å¯¹æ¯”ä¸æ¨è
* ä¸åšæŠ•ä¿å†³ç­–æ›¿ä»£ï¼ˆé¿å… AI è¯¯å¯¼ï¼‰

> ğŸ§  **äº§å“å–èˆåŸåˆ™**ï¼š
> æœ¬é¡¹ç›®å®šä½ä¸º **B ç«¯æ•ˆç‡å·¥å…·**ï¼Œè€Œéå†³ç­–ç³»ç»Ÿï¼Œé¿å… AI æ›¿ä»£äººç±»åˆ¤æ–­ã€‚

---

## ğŸ› ï¸ äº”ã€æŠ€æœ¯æ–¹æ¡ˆï¼ˆç®€è¦ï¼‰

* ğŸ§  LLMï¼šOpenAI GPT ç³»åˆ—
* ğŸ§¬ Embeddingï¼šOpenAI Embedding API
* ğŸ—„ï¸ å‘é‡æ•°æ®åº“ï¼šSupabase
* ğŸš€ åç«¯æœåŠ¡ï¼šFastAPI

### ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹© RAG è€Œä¸æ˜¯å¾®è°ƒï¼Ÿ

* ğŸ”„ ä¿é™©æ¡æ¬¾æ›´æ–°é¢‘ç¹ï¼ŒRAG åªéœ€æ›¿æ¢æ–‡æ¡£
* ğŸ’° æˆæœ¬æ›´ä½ã€ä¸Šçº¿æ›´å¿«
* ğŸ§ª æ›´é€‚åˆäº§å“éªŒè¯ä¸æ—©æœŸè½åœ°é˜¶æ®µ

---

## ğŸŒŸ å…­ã€äº§å“ä»·å€¼ï¼ˆSo Whatï¼‰

* â±ï¸ å¸®åŠ©ä¸šåŠ¡å‘˜ **å¿«é€Ÿç†è§£** å¤æ‚ä¿é™©äº§å“
* ğŸ§© è¾“å‡º **æ ‡å‡†åŒ–ã€å¯å¤ç”¨** çš„é”€å”®è¯æœ¯
* âš™ï¸ å°† AI èƒ½åŠ›çœŸæ­£åµŒå…¥ä¸šåŠ¡å·¥ä½œæµï¼Œè€Œä¸æ˜¯åœç•™åœ¨ Demo

---

## ğŸ§­ ä¸ƒã€åç»­å¯æ‰©å±•æ–¹å‘ï¼ˆè§„åˆ’ï¼Œä¸ä»£è¡¨å·²å®ç°ï¼‰

* ğŸ“„ è‡ªåŠ¨è§£æ PDF å¹¶ç”Ÿæˆ seed æ•°æ®
* ğŸ“š å¤šä¿é™©äº§å“ç»Ÿä¸€ç®¡ç†ä¸æ£€ç´¢
* ğŸ“Š é«˜é¢‘é—®é¢˜ç¼“å­˜ + åé¦ˆé—­ç¯ä¼˜åŒ–

---

## ğŸ§  ä¸€å¥è¯æ€»ç»“ï¼ˆç»™é¢è¯•å®˜çœ‹çš„ï¼‰

> **è¿™æ˜¯ä¸€ä¸ªæŠŠ AI ä»â€œä¼šå›ç­”é—®é¢˜â€ï¼Œå˜æˆâ€œçœŸæ­£å¸®ä¸šåŠ¡å‘˜æé«˜æ•ˆç‡â€çš„äº§å“åŸå‹ã€‚**

---

## ğŸš€ å…«ã€æœ¬åœ°å¯åŠ¨æ•™ç¨‹

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/qd-maker/insurance-rag.git
cd insurance-rag
```

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–ä½¿ç”¨ pnpm/yarn
pnpm install
```

### 3ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# OpenAI é…ç½®
OPENAI_API_KEY=your_openai_api_key
```

**è·å–æ–¹å¼ï¼š**
- **Supabase**ï¼šè®¿é—® [supabase.com](https://supabase.com) â†’ åˆ›å»ºé¡¹ç›® â†’ Settings â†’ API
- **OpenAI**ï¼šè®¿é—® [platform.openai.com](https://platform.openai.com/api-keys)

### 4ï¸âƒ£ å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) å³å¯æŸ¥çœ‹åº”ç”¨ ğŸ‰

---

### 5ï¸âƒ£ åˆå§‹åŒ–æ•°æ®åº“

åœ¨ Supabase é¡¹ç›®ä¸­æ‰§è¡Œä»¥ä¸‹SQLè„šæœ¬ï¼š

**æ–¹æ³• 1ï¼šåœ¨ Supabase Dashboard æ‰§è¡Œ**
1. è®¿é—®ä½ çš„ Supabase é¡¹ç›® â†’ SQL Editor
2. å¤åˆ¶ `supabase/sql/001_rag_schema.sql` å†…å®¹å¹¶æ‰§è¡Œ
3. å¦‚æœæœ‰è§¦å‘å™¨é”™è¯¯ï¼Œæ‰§è¡Œ `supabase/sql/002_fix_trigger.sql`

**æ–¹æ³• 2ï¼šä½¿ç”¨ Supabase CLI**
```bash
supabase db push
```

---

### 6ï¸âƒ£ å¯¼å…¥ä¿é™©äº§å“æ•°æ®

**ä¸€é”®å¯¼å…¥**ï¼ˆæ¨èï¼‰ï¼š
```bash
npx tsx scripts/seed.ts
```

æ­¤å‘½ä»¤ä¼šè‡ªåŠ¨ï¼š
- âœ… å¯¼å…¥äº§å“åˆ°æ•°æ®åº“
- âœ… AI ç”Ÿæˆäº§å“æè¿°
- âœ… ä¿ç•™å®Œæ•´æ¡æ¬¾å†…å®¹
- âœ… **è‡ªåŠ¨ç”Ÿæˆå‘é‡ embeddings**

**é¢„æœŸè¾“å‡º**ï¼š
```
å…± 4 ä¸ªäº§å“å¾…å¤„ç†...
...
==== å¯¼å…¥æ€»ç»“æŠ¥å‘Š ====
äº§å“ï¼šåˆ›å»º 4ï¼Œæ›´æ–° 0ï¼Œè·³è¿‡ 0ï¼Œå¤±è´¥ 0
æ¡æ¬¾ï¼šæ’å…¥ 4ï¼Œè·³è¿‡ 0ï¼Œå¤±è´¥ 0
å…¨éƒ¨æˆåŠŸ âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ æ£€æµ‹åˆ°æ–°æ’å…¥æ¡æ¬¾ï¼Œå¼€å§‹è‡ªåŠ¨ç”Ÿæˆå‘é‡...
å‘ç° 4 æ¡ç¼ºå¤±å‘é‡çš„æ¡æ¬¾
...
å‘é‡ç”Ÿæˆå®Œæˆï¼
  âœ… æˆåŠŸ: 4 æ¡
```

---

### 7ï¸âƒ£ æ·»åŠ æ–°çš„ä¿é™©äº§å“

**æ­¥éª¤ 1**ï¼šç¼–è¾‘ `scripts/seedData.ts`

```typescript
export const productsToInsert: SeedProduct[] = [
  // ... ç°æœ‰äº§å“
  {
    name: 'æ–°äº§å“åç§°',
    content: 'å®Œæ•´çš„äº§å“æè¿°ï¼ŒåŒ…å«ä¿é¢ã€å…èµ”é¢ã€ç­‰å¾…æœŸã€é™¤å¤–è´£ä»»ç­‰æ‰€æœ‰å…³é”®ä¿¡æ¯...',
  }
];
```

**æ­¥éª¤ 2**ï¼šè¿è¡Œå¯¼å…¥è„šæœ¬
```bash
npx tsx scripts/seed.ts
```

å°±è¿™ä¹ˆç®€å•ï¼è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹æ–°äº§å“å¹¶ç”Ÿæˆå‘é‡ã€‚

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[HOW_TO_ADD_PRODUCT.md](HOW_TO_ADD_PRODUCT.md)

---

### ğŸ“ å…¶ä»–å‘½ä»¤

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run start

# ä»£ç æ£€æŸ¥
npm run lint

# å•ç‹¬é‡æ–°ç”Ÿæˆå‘é‡ï¼ˆå¦‚éœ€è¦ï¼‰
npx tsx scripts/regenerate-vectors.ts
```

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
insurance-rag/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/          # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ search/   # æœç´¢ API
â”‚   â”‚   â”‚   â””â”€â”€ products/ # äº§å“æ£€æŸ¥ API
â”‚   â”‚   â””â”€â”€ page.tsx      # ä¸»é¡µé¢
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ embeddings.ts # å‘é‡ç”Ÿæˆå·¥å…·
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ seed.ts           # æ•°æ®å¯¼å…¥è„šæœ¬
â”‚   â”œâ”€â”€ seedData.ts       # æ•°æ®æº
â”‚   â””â”€â”€ regenerate-vectors.ts  # å‘é‡ç”Ÿæˆå·¥å…·
â”œâ”€â”€ supabase/sql/         # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ 001_rag_schema.sql
â”‚   â””â”€â”€ 002_fix_trigger.sql
â””â”€â”€ README.md
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 16 + React + TypeScript
- **æ•°æ®åº“**: Supabase (PostgreSQL + pgvector)
- **AI**: OpenAI API
- **æ£€ç´¢**: RAG (Retrieval-Augmented Generation)
- **å‘é‡**: text-embedding-ada-002 (1536ç»´)

---

## ğŸ“„ è®¸å¯è¯

MIT License
